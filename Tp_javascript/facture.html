<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>La facture</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">

		<script >
		var index=0;
		var sauvegarde=[];
		var total;
		function ajouterProduit(){
			//alert("hello");

			var number=parseFloat(document.getElementById('number').value);
			var price=parseFloat(document.getElementById('price').value);
			var produit=document.getElementById('produit').value;
			var achat=price*number;
			total=total+achat;

			var select=document.getElementById("tab1");
			select.innerHTML="";

			var transaction={Produit:produit, Nombres:number, Prix:price, Achat:achat};
			sauvegarde.push(transaction);
			for (var i = 0; i<sauvegarde.length; i++) {
			html = '<tr>';
			  
			  	html += '<td>' + sauvegarde[i].Produit+ '</td>';
			  	html += '<td>' + sauvegarde[i].Nombres+ '</td>';
			  	html += '<td>' + sauvegarde[i].Prix+ '</td>';
			  	html += '<td>' + sauvegarde[i].Achat+ '</td></tr>';

			
			select.innerHTML+=html;
			}	
			var html2='<tr>';
			  
			  html2 += '<td>' + " "+ '</td>';
			  html2 += '<td>' + " "+ '</td>';
			  html2 += '<td>' + "Total HT"+ '</td>';
			  html2 += '<td>' + total+ '</td></tr>';

			  '<tr>';
			  
			  html2 += '<td>' + " "+ '</td>';
			  html2 += '<td>' + " "+ '</td>';
			  html2 += '<td>' + "TVA"+ '</td>';
			  html2 += '<td>' + (0.2*total)+ '</td></tr>';

			  '<tr>';
			  
			  html2 += '<td>' + " "+ '</td>';
			  html2 += '<td>' + " "+ '</td>';
			  html2 += '<td>' + "Total TTC"+ '</td>';
			  html2 += '<td>' + (total+(0.2*total))+ '</td></tr>';
			 
			 document.getElementById("facture").innerHTML=html2;
			 index++
			
		}

			function enleverProduit(){
			//alert("hello");
			var ligne=(document.getElementById("nbLigne").value)-1;
			if(ligne>sauvegarde.length-1){
				alert("La ligne n'est pas dans la facture.")
			}
			else{
			total=total-sauvegarde[ligne].Achat;
			sauvegarde.splice(ligne, 1);

			var select=document.getElementById("tab1");
			select.innerHTML="";

			for (var i = 0; i<sauvegarde.length; i++) {
			html = '<tr>';
			  
			  	html += '<td>' + sauvegarde[i].Produit+ '</td>';
			  	html += '<td>' + sauvegarde[i].Nombres+ '</td>';
			  	html += '<td>' + sauvegarde[i].Prix+ '</td>';
			  	html += '<td>' + sauvegarde[i].Achat+ '</td></tr>';

			
			select.innerHTML+=html;
			}	
			var html2='<tr>';
			  
			  html2 += '<td>' + " "+ '</td>';
			  html2 += '<td>' + " "+ '</td>';
			  html2 += '<td>' + "Total HT"+ '</td>';
			  html2 += '<td>' + total+ '</td></tr>';

			  '<tr>';
			  
			  html2 += '<td>' + " "+ '</td>';
			  html2 += '<td>' + " "+ '</td>';
			  html2 += '<td>' + "TVA"+ '</td>';
			  html2 += '<td>' + (0.2*total)+ '</td></tr>';

			  '<tr>';
			  
			  html2 += '<td>' + " "+ '</td>';
			  html2 += '<td>' + " "+ '</td>';
			  html2 += '<td>' + "Total TTC"+ '</td>';
			  html2 += '<td>' + (total+(0.2*total))+ '</td></tr>';
			 
			 document.getElementById("facture").innerHTML=html2;
			 index--
			}
			
		}
	</script>
</head>
<body>

	<div class="container" style="margin-top:3em;">

		<div class="jumbotron">
		  <div class="container">
		    <h1 class="display-3">Facture</h1>
		  </div>
		</div>

		<table class="table table-striped" id='tab'>
			<tbody>
				<tr>
				<td>
					<select class="form-control" id="produit">
  						<option>Pomme</option>
  						<option>Poire</option>
  						<option>Cerise</option>
  						<option>Avocat</option>
  						<option>Orange</option>
  						<option>Melon</option>
  						<option>Patate</option>

					</select>
				</td>
				<td><input type="number" name="number" min="0" class="form-control" id="number" placeholder="QuantitÃ©" value="1"></td>
				<td><input type="number" name="price" class="form-control" id="price" placeholder="Prix Ã  l'unitÃ©" value="1"></td>

				<td><button onclick="ajouterProduit()" type="submit" id="add" class="btn btn-primary">Ajouter le produit</button></td>
			</tr>
			</tbody>
							<tr>
				<td>Produit</td>
				<td>Nombres</td>
				<td>Prix</td>
				<td>Prix Total</td></tr>
		</table>

		<table class="table table-striped" id='tab1'>
			
		</table>

		<table class="table table-striped" id='facture'>
			
		</table>
		<div>
			<p>Choisissez la ligne a enlever.</p>
			<input type="number" name="Choisissez la ligne a enlever." id="nbLigne">
			<button onclick="enleverProduit()" type="submit" id="remove" class="btn btn-primary">Enlever un produit</button>
		</div>

	</div>

<script >var total=0;</script>
</body>
</html>